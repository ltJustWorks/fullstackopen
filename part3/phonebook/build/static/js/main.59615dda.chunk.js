(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),r=t(17),a=t(3),i=t(2),u=t(0),d=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("div",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:function(){t(n.id)},children:"Delete"})]})},s=function(e){var n=e.filteredPeople,t=e.deletePerson;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsx)(d,{person:e,deletePerson:t},e.name)}))})},l=function(e){var n=e.newName,t=e.handleNewName,c=e.newPhone,o=e.handleNewPhone,r=e.addPerson;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var n=e.keyword,t=e.handleKeyword;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"notification",children:n})},b=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})},h=t(5),m=t.n(h),O="/api/persons",v=function(){return m.a.get(O)},x=function(e){return m.a.post(O,e)},w=function(e){return m.a.delete("".concat(O,"/").concat(e))},p=function(e,n){return m.a.put("".concat(O,"/").concat(e),n)},g=(t(41),function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)(""),d=Object(a.a)(o,2),h=d[0],m=d[1],O=Object(i.useState)(""),g=Object(a.a)(O,2),P=g[0],y=g[1],N=Object(i.useState)(""),k=Object(a.a)(N,2),S=k[0],C=k[1],D=Object(i.useState)(!1),I=Object(a.a)(D,2),E=I[0],J=I[1],K=Object(i.useState)(null),L=Object(a.a)(K,2),T=L[0],A=L[1],B=Object(i.useState)(null),R=Object(a.a)(B,2),q=R[0],z=R[1];Object(i.useEffect)((function(){v().then((function(e){c(e.data)}))}),[]);var F,G=function(e){A(e),setTimeout((function(){A(null)}),5e3)},H=function(e){z(e),setTimeout((function(){z(null)}),5e3)},M=function(e,n){p(e,n).then((function(n){c(t.map((function(t){return t.id!==e?t:n.data}))),G("Changed ".concat(h,"'s number to ").concat(P))})).catch((function(o){console.log("error: ",o),H("Information of ".concat(n.name," was already removed from server")),c(t.filter((function(n){return n.id!==e})))}))},Q=E?(F=S,t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())}))):t;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(f,{message:T}),Object(u.jsx)(b,{message:q}),Object(u.jsx)(j,{handleKeyword:function(e){C(e.target.value),""===e.target.value?J(!1):J(!0)},keyword:S}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(l,{newName:h,handleNewName:function(e){m(e.target.value)},newPhone:P,handleNewPhone:function(e){y(e.target.value)},addPerson:function(e){e.preventDefault();var n=t[t.length-1].id+1,o={name:h,number:P,id:n};console.log(o);var a=t.find((function(e){return e.name===h}));if(void 0!==a){var i=a.id;return window.confirm("".concat(h," is already added to phonebook, do you want to update the existing entry?"))&&M(i,o),m(""),void y("")}x(o).then((function(e){c([].concat(Object(r.a)(t),[e.data])),G("Added ".concat(h))})),m(""),y("")}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{filteredPeople:Q,deletePerson:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&w(e).then((function(o){G("Removed ".concat(n," from phonebook")),c(t.filter((function(n){return n.id!==e})))})).catch((function(o){H("Information of ".concat(n," was already removed from server")),c(t.filter((function(n){return n.id!==e})))}))}})]})});o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.59615dda.chunk.js.map